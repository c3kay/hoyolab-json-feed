[tox]
isolated_build = True
envlist = clean, lint, py38, py39, py310

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310

[testenv]
deps =
    pytest
    pytest-asyncio
    pytest-cov
    pytest-mock
    coverage[toml]
    atoma
    langdetect
commands = pytest {posargs}

[testenv:lint]
skip_install = true
basepython = python3
deps = flake8
commands =
    flake8 src tests --count --max-line-length=120 --select=E9,F63,F7,F82 --show-source
    flake8 src tests --count --max-line-length=120 --exit-zero

[testenv:clean]
skip_install = true
deps = coverage[toml]
commands = coverage erase
